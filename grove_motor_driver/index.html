
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://ros-mobile-robots.com/grove_motor_driver/" rel="canonical"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-8.5.10" name="generator"/>
<title>Motor Driver - DiffBot Differential Drive Mobile Robot</title>
<link href="../assets/stylesheets/main.975780f9.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.2505c338.min.css" rel="stylesheet"/>
<script src="../js/jquery-3.5.1.min.js"></script>
<script src="../js/jquery.fitvids.js"></script>
<!-- Arithmatex -->
<!-- MathJax
        <script src="../js/mathjax.js"></script>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        -->
<!-- KaTeX -->
<script src="../js/katex.js"></script>
<script crossorigin="anonymous" integrity="sha256-F/Xda58SPdcUCr+xhSGz9MA2zQBPb0ASEYKohl8UCHc=" src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.js">
</script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/>
<!-- Pseudocode -->
<link href="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.js"></script>
<script>
        pseudocode.renderElement(document.getElementById("markov-localization"));
    </script>
<!-- UML diagrams using Mermaid -->
<script src="https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js"></script>
<script>
        mermaid.initialize({ startOnLoad: true, securityLevel: "loose" });
    </script>
<!-- Adsense -->
<script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2214309606626131"></script>
<!-- Cookie consent -->
<link href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" rel="stylesheet" type="text/css">
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-5Z9V7GPRX3"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-5Z9V7GPRX3",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-5Z9V7GPRX3",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
<script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
</link><link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="indigo" data-md-color-primary="white" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#grove-i2c-motor-driver-v13">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="DiffBot Differential Drive Mobile Robot" class="md-header__button md-logo" data-md-component="logo" href=".." title="DiffBot Differential Drive Mobile Robot">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            DiffBot Differential Drive Mobile Robot
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Motor Driver
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="white" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="red" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="black" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/ros-mobile-robots/diffbot" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="..">
      Home
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../technical_requirements/">
        Getting Started
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../hardware_setup/overview/">
        Hardware Setup
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../processing_units/">
        Processing Units
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../packages/">
        ROS Software Packages
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../theory/">
        Robotics Theory
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../theory/motion-and-odometry/">
        Hardware and Theory
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../insiders/">
      Insiders
    </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="DiffBot Differential Drive Mobile Robot" class="md-nav__button md-logo" data-md-component="logo" href=".." title="DiffBot Differential Drive Mobile Robot">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    DiffBot Differential Drive Mobile Robot
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/ros-mobile-robots/diffbot" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
        Home
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Getting Started" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../technical_requirements/">
        Technical Requirements
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../components/">
        Components
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3">
          Hardware Setup
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Hardware Setup" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Hardware Setup
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../hardware_setup/overview/">
        Hardware Setup Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hardware_setup/3D_print/">
        3D Printing
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hardware_setup/electronics/">
        Electronics
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hardware_setup/assembly/">
        Assembly
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hardware_setup/install/">
        Install
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../processing_units/">Processing Units</a>
<label for="__nav_4">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Processing Units" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Processing Units
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" id="__nav_4_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2">
          Single Board Computer
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Single Board Computer" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
          Single Board Computer
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../processing_units/rpi-setup/">
        Raspberry Pi Setup
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../processing_units/jetson-nano-setup/">
        Jetson Nano Setup
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../processing_units/git-setup/">
        Git Setup
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../processing_units/ros-setup/">
        ROS Setup
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../processing_units/teensy-mcu/">
        Microcontroller
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../processing_units/hardware-interfaces/">
        Hardware Interfaces
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../processing_units/ros-network-setup/">
        ROS Network Setup
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" id="__nav_5" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../packages/">ROS Software Packages</a>
<label for="__nav_5">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="ROS Software Packages" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          ROS Software Packages
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../packages/packages-setup/">
        Packages Setup
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../diffbot_robot/">
        Robot Package
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4" id="__nav_5_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_4">
          Robot Description
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Robot Description" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_4">
<span class="md-nav__icon md-icon"></span>
          Robot Description
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../robot-description/">
        Robot Description
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../packages/remo_description/">
        Remo Description
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../diffbot_gazebo/">
        Simulation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../diffbot_control/">
        Control
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_7" id="__nav_5_7" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../packages/diffbot_base/">Base Hardware Interface</a>
<label for="__nav_5_7">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Base Hardware Interface" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_7">
<span class="md-nav__icon md-icon"></span>
          Base Hardware Interface
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../packages/diffbot_base/pid/">
        PID Controllers
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../packages/diffbot_base/low-level/">
        Low-Level PID Approach
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../packages/diffbot_base/high-level/">
        High-Level PID Approach
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../diffbot_msgs/">
        Messages
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Motor Driver
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Motor Driver
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#grove-i2c-motor-driver-v13">
    Grove - I2C Motor Driver V1.3
  </a>
<nav aria-label="Grove - I2C Motor Driver V1.3" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#connection">
    Connection
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test-motor-driver">
    Test Motor Driver
  </a>
<nav aria-label="Test Motor Driver" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#troubleshooting">
    Troubleshooting
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ros-node-for-motor-driver">
    ROS Node for Motor Driver
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../DG01D-E-motor-with-encoder/">
        Motor and Encoder
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../diffbot_navigation/">
        Navigation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../diffbot_slam/">
        SLAM
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../diffbot_mbf/">
        Move Base Flex
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../diffbot_bringup/">
        Hardware Bringup
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../packages/raspicam_node/">
        Rasperry Pi Camera
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_16" id="__nav_5_16" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_16">
          Inertial Measurement Unit
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Inertial Measurement Unit" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_16">
<span class="md-nav__icon md-icon"></span>
          Inertial Measurement Unit
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../packages/imu/robot_localization/">
        Robot Localization
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../packages/imu/driver-bno055/">
        BNO055 Driver
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" id="__nav_6" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../theory/">Robotics Theory</a>
<label for="__nav_6">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Robotics Theory" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          Robotics Theory
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_2" id="__nav_6_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_2">
          Preliminaries
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Preliminaries" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_2">
<span class="md-nav__icon md-icon"></span>
          Preliminaries
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/preliminaries/linear-algebra/">
        Linear Algebra
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/preliminaries/probability/">
        Probability
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/preliminaries/programming/">
        Programming
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_3" id="__nav_6_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_3">
          Modeling and Control
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Modeling and Control" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_3">
<span class="md-nav__icon md-icon"></span>
          Modeling and Control
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/modeling-control/control-systems-introduction/">
        Introduction to Control Systems
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/modeling-control/robot-representations/">
        Representations and models
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/modeling-control/modeling-differential-drive-robot/">
        Modeling a Differential Drive Robot
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/modeling-control/odometry/">
        Odometry
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_4" id="__nav_6_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_4">
          Robot Vision
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Robot Vision" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_4">
<span class="md-nav__icon md-icon"></span>
          Robot Vision
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/robot-vision/pinhole-camera-model/">
        Pinhole Camera Model
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/robot-vision/camera-calibration/">
        Camera Calibration
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/robot-vision/image-processing/">
        Image Processing
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/robot-vision/features-and-segmentation/">
        Features and Segmentation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/robot-vision/tracking-image-features/">
        Tracking Image Features
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/robot-vision/combining-camera-and-lidar/">
        Combining Camera and Lidar
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/object-detection/overview.md">
        Object Detection
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_6" id="__nav_6_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_6">
          State Estimation
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="State Estimation" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_6">
<span class="md-nav__icon md-icon"></span>
          State Estimation
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/state-estimation/recursive-state-estimation/">
        Recursive State Estimation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/state-estimation/gaussian-filters.md">
        Gaussian Filters (Kalman Filter)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/state-estimation/nonparametric-filters/">
        Nonparametric Filters (Particle Filter)
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_7" id="__nav_6_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_7">
          Localization
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Localization" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_7">
<span class="md-nav__icon md-icon"></span>
          Localization
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/localization/markov-and-gaussian-localization/">
        Markov and Gaussian Localization
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/localization/grid-and-monte-carlo-localization.md">
        Grid and Monte Carlo Localization
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_8" id="__nav_6_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_8">
          Mapping
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Mapping" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_8">
<span class="md-nav__icon md-icon"></span>
          Mapping
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/mapping/occupancy-grid-mapping.md">
        Occupancy Grid Mapping
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_9" id="__nav_6_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_9">
          Simultaneous Localization and Mapping (SLAM)
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Simultaneous Localization and Mapping (SLAM)" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_9">
<span class="md-nav__icon md-icon"></span>
          Simultaneous Localization and Mapping (SLAM)
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/slam/slam-overview/">
        SLAM Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/slam/1.%20Robot%20Moving%20and%20Sensing/">
        Robot Class
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/slam/2.%20Omega%20and%20Xi%2C%20Constraints/">
        Omega and Xi Constraints Notebook
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/slam/3.%20Landmark%20Detection%20and%20Tracking/">
        Project 3:  Implement SLAM
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/slam/ekf-slam.md">
        EKF SLAM
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/slam/graphslam.md">
        GraphSLAM
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/slam/fastslam.md">
        FastSLAM
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/slam/gmapping.md">
        GMapping
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/planning1/overview.md">
        Planning I
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/planning2/overview.md">
        Planning II
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/reinforcement-learning/overview.md">
        Learning by Reinforcement
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/imitation-learning/overview.md">
        Learning by Imitation
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7">
          Hardware and Theory
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Hardware and Theory" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
          Hardware and Theory
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../theory/motion-and-odometry/">
        Motion and Odometry
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../power-supply/">
        Power Supply
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../laser-range-scanner/">
        Laser Range Scanner
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../insiders/">
        Insiders
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#grove-i2c-motor-driver-v13">
    Grove - I2C Motor Driver V1.3
  </a>
<nav aria-label="Grove - I2C Motor Driver V1.3" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#connection">
    Connection
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test-motor-driver">
    Test Motor Driver
  </a>
<nav aria-label="Test Motor Driver" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#troubleshooting">
    Troubleshooting
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ros-node-for-motor-driver">
    ROS Node for Motor Driver
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/ros-mobile-robots/ros-mobile-robots.github.io/tree/main/docs/grove_motor_driver.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"></path></svg>
</a>
<h1>Motor Driver</h1>
<h2 id="grove-i2c-motor-driver-v13">Grove - I2C Motor Driver V1.3</h2>
<p>The package for the <a href="http://wiki.seeedstudio.com/Grove-I2C_Motor_Driver_V1.3/">Grove I2C Motor Driver V1.3</a> from Seeed Studio is created with <a href="https://catkin-tools.readthedocs.io/en/latest/verbs/catkin_create.html#catkin-create-pkg"><code>catkin create pkg PKG_NAME [--catkin-deps [DEP [DEP ...]]]</code></a>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="gp">fjp@ubuntu:~/git/diffbot/ros/src$ </span>catkin create pkg grove_motor_driver --catkin-deps rospy roscpp geometry_msgs
<span class="go">Creating package "grove_motor_driver" in "/home/fjp/git/diffbot/ros/src"...</span>
<span class="go">Created file grove_motor_driver/CMakeLists.txt</span>
<span class="go">Created file grove_motor_driver/package.xml</span>
<span class="go">Created folder grove_motor_driver/include/grove_motor_driver</span>
<span class="go">Created folder grove_motor_driver/src</span>
<span class="go">Successfully created package files in /home/fjp/git/diffbot/ros/src/grove_motor_driver.</span>
</code></pre></div></td></tr></table></div>
<p>The package depends on the two ROS <a href="http://wiki.ros.org/Client%20Libraries">client libraries</a> <a href="http://wiki.ros.org/rospy"><code>rospy</code></a> and <a href="http://wiki.ros.org/roscpp"><code>roscpp</code></a>. 
To control the two motors the package will use the <a href="https://docs.ros.org/api/geometry_msgs/html/msg/Twist.html"><code>geometry_msgs/Twist</code></a> message.
The interface to the motor driver is done with the <a href="https://github.com/DexterInd/GrovePi/blob/master/Software/Python/grove_i2c_motor_driver">Python library from DexterInd</a> 
which is a rewerite of the <a href="https://github.com/Seeed-Studio/Grove_I2C_Motor_Driver_v1_3/blob/master">Seeed Studio Arduino library</a>.</p>
<p>This library requires the following two python libraries</p>
<ul>
<li><a href="https://pypi.org/project/RPi.GPIO/">RPi.GPIO</a></li>
<li><a href="https://pypi.org/project/smbus/">smbus</a> SMBus (System Management Bus) is a subset from the I2C protocol</li>
</ul>
<p>These libraries should be installed with <code>pip3</code>, Python's package manager:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="go">pip3 install RPi.GPIO</span>
<span class="go">pip3 install smbus</span>
</code></pre></div></td></tr></table></div>
<p class="notice">Note that this will install these packages system wide. This is ok because they are installed on the Raspberry Pi which is dedicated to 
operate for this purpose. For a development environment it is best practice to use a python virtual environment like 
<a href="https://docs.python.org/3/library/venv.html"><code>venv</code></a> and install the packages inside it.</p>
<h3 id="connection">Connection</h3>
<p>Afterwards the I2C port of the motor should be connected to the I2C port 1 of the Raspberry Pi 4 B. 
Don't forget to remove the jumper on the motor driver board which would provide power to the Pi.
However, it is also not required to connect VCC and GND of the I2C connector. 
Only the SDA (data) and SCL (clock) wires are required.</p>
<p>Make sure to set the address with the dip switches on the motor driver to <code>0x0f</code> because this is the default address used
in the library files.</p>
<p>To test the physical I2C connection use <code>i2cdetect</code> described in <a href="https://fjp.at/projects/diffbot/hardware-interfaces/#prepare-i2c-connection">Hardware Interfaces</a>:
The output should list <code>0f</code> in the address table:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="gp">$ </span>i2cdetect -y <span class="m">1</span>
<span class="go">     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f</span>
<span class="go">00:          -- -- -- -- -- -- -- -- -- -- -- -- 0f </span>
<span class="go">10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- </span>
<span class="go">20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- </span>
<span class="go">30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- </span>
<span class="go">40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- </span>
<span class="go">50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- </span>
<span class="go">60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- </span>
<span class="go">70: -- -- -- -- -- -- -- --</span>
</code></pre></div></td></tr></table></div>
<h3 id="test-motor-driver">Test Motor Driver</h3>
<p>Test the motor driver by running one of the python files:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="gp">fjp@ubuntu:~/git/diffbot/ros/src/grove_motor_driver/src$ </span>python3 motor_example.py 
<span class="go">Forward</span>
<span class="go">Back</span>
<span class="go">Stop</span>
<span class="go">Speed: 0</span>
<span class="go">Speed: 1</span>
<span class="go">Speed: 2</span>
<span class="go">Speed: 3</span>
<span class="go">Speed: 4</span>
<span class="go">Speed: 5</span>
<span class="go">Speed: 6</span>
<span class="go">Speed: 7</span>
<span class="go">Speed: 8</span>
<span class="go">Speed: 9</span>
<span class="go">Speed: 10</span>
<span class="go">Speed: 11</span>
<span class="go">Speed: 12</span>
<span class="go">...</span>
<span class="go">Speed: 25</span>
<span class="go">Speed: 26</span>
<span class="go">Speed: 27</span>
<span class="go">Speed: 28</span>
<span class="go">Speed: 29</span>
<span class="go">Speed: 30</span>
<span class="go">Speed: 31</span>
<span class="go">Speed: 32</span>
<span class="go">Speed: 33</span>
<span class="go">...</span>
<span class="go">Speed: 55</span>
<span class="go">Speed: 56</span>
<span class="go">Speed: 57</span>
<span class="go">Speed: 58</span>
<span class="go">Speed: 59</span>
<span class="go">Speed: 60</span>
<span class="go">Speed: 61</span>
<span class="go">Speed: 62</span>
<span class="go">Speed: 63</span>
<span class="go">Speed: 64</span>
<span class="go">Speed: 65</span>
<span class="go">Speed: 66</span>
<span class="go">...</span>
<span class="go">Speed: 75</span>
<span class="go">Speed: 76</span>
<span class="go">Speed: 77</span>
<span class="go">Speed: 78</span>
<span class="go">Speed: 79</span>
<span class="go">Speed: 80</span>
<span class="go">Speed: 81</span>
<span class="go">Speed: 82</span>
<span class="go">Speed: 83</span>
<span class="go">Speed: 84</span>
<span class="go">Speed: 85</span>
<span class="go">Speed: 86</span>
<span class="go">Speed: 87</span>
<span class="go">Speed: 88</span>
<span class="go">...</span>
<span class="go">Speed: 97</span>
<span class="go">Speed: 98</span>
<span class="go">Speed: 99</span>
<span class="go">Stop</span>
</code></pre></div></td></tr></table></div>
<h4 id="troubleshooting">Troubleshooting</h4>
<p>If you get errors like the following, make sure the I2C cables from the motor driver to the 
Raspberry Pi are connected (see <a href="https://fjp.at/projects/diffbot/hardware-interfaces/#prepare-i2c-connection">Hardware Interfaces</a> for more infos) 
and use the <code>RESET</code> button on the motor driver.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="gp">fjp@ubuntu:~/git/2wd-robot/ros/src/control$ </span>sudo python grove_i2c_motor_driver.py 
<span class="go">Traceback (most recent call last):</span>
<span class="go">  File "grove_i2c_motor_driver.py", line 68, in &lt;module&gt;</span>
<span class="go">    m.MotorSpeedSetAB(100,100)</span>
<span class="go">  File "grove_i2c_motor_driver.py", line 57, in MotorSpeedSetAB</span>
<span class="go">    bus.write_i2c_block_data(self.I2CMotorDriverAdd, self.MotorSpeedSet, [MotorSpeedA,MotorSpeedB])</span>
<span class="go">IOError: [Errno 110] Connection timed out</span>
<span class="gp">fjp@ubuntu:~/git/2wd-robot/ros/src/control$ </span>sudo python grove_i2c_motor_driver.py 
<span class="go">Traceback (most recent call last):</span>
<span class="go">  File "grove_i2c_motor_driver.py", line 68, in &lt;module&gt;</span>
<span class="go">    m.MotorSpeedSetAB(100,100)</span>
<span class="go">  File "grove_i2c_motor_driver.py", line 57, in MotorSpeedSetAB</span>
<span class="go">    bus.write_i2c_block_data(self.I2CMotorDriverAdd, self.MotorSpeedSet, [MotorSpeedA,MotorSpeedB])</span>
<span class="go">IOError: [Errno 121] Remote I/O error</span>
</code></pre></div></td></tr></table></div>
<p>Try pressing the <code>RESET</code> button and release it right before executing one of the scripts.
You should also be able to detect the motor driver with <code>i2cdetect -y 1</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="gp">fjp@ubuntu:~/git/2wd-robot/ros/src/control/src$ </span>sudo i2cdetect -y <span class="m">1</span>
<span class="go">     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f</span>
<span class="go">00:          -- -- -- -- -- -- -- -- -- -- -- -- 0f </span>
<span class="go">10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- </span>
<span class="go">20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- </span>
<span class="go">30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- </span>
<span class="go">40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- </span>
<span class="go">50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- </span>
<span class="go">60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- </span>
<span class="go">70: -- -- -- -- -- -- -- --</span>
</code></pre></div></td></tr></table></div>
<p>As you can see the address of the motor driver is detected at <code>0x0f</code>.</p>
<p>In case of the following output, where every address of the I2C bus seems to be taken,
it is most likely that the SDA (data) and SCL (clock) signal cables are switched:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="go">i2cdetect -y 1</span>
<span class="go">     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f</span>
<span class="go">00:          03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f </span>
<span class="go">10: 10 11 12 13 14 15 16 17 18 19 1a 1b 1c 1d 1e 1f </span>
<span class="go">20: 20 21 22 23 24 25 26 27 28 29 2a 2b 2c 2d 2e 2f </span>
<span class="go">30: 30 31 32 33 34 35 36 37 38 39 3a 3b 3c 3d 3e 3f </span>
<span class="go">40: 40 41 42 43 44 45 46 47 48 49 4a 4b 4c 4d 4e 4f </span>
<span class="go">50: 50 51 52 53 54 55 56 57 58 59 5a 5b 5c 5d 5e 5f </span>
<span class="go">60: 60 61 62 63 64 65 66 67 68 69 6a 6b 6c 6d 6e 6f </span>
<span class="go">70: 70 71 72 73 74 75 76 77</span>
</code></pre></div></td></tr></table></div>
<p>To solve this make sure the SDA and SCL cables are connected to the right pins on the Raspberry Pi.
See <a href="https://fjp.at/projects/diffbot/hardware-interfaces/#prepare-i2c-connection">Hardware Interfaces</a> for more infos.</p>
<p>Another solution is to restart the Raspberry Pi while making sure that the motor driver is powerd on by connecting it to the battery pack.</p>
<h3 id="ros-node-for-motor-driver">ROS Node for Motor Driver</h3>
<p>To use the available library of the Grove I2C motor driver in ROS we need to create a wrapper node, called <a href="https://github.com/fjp/2wd-robot/blob/master/ros/src/grove_motor_driver/src/motor_driver.py"><code>motor_driver</code></a>.
The node subscribes to the topic <code>/2wd_robot/cmd_vel</code> which is of type <a href="https://docs.ros.org/api/geometry_msgs/html/msg/Twist.html">Twist message</a> 
from the <a href="https://docs.ros.org/api/geometry_msgs/html/index-msg.html">geometry_msgs</a> header. 
To send commands to the motor the . These topics can be published with nodes from the navigation stack or with <a href="http://wiki.ros.org/rostopic#rostopic_pub"><code>rostopic pub</code></a> for test purposes.</p>
<p><a href="https://en.wikipedia.org/wiki/Differential_wheeled_robot">https://en.wikipedia.org/wiki/Differential_wheeled_robot</a></p>
<p><a href="http://wiki.ros.org/differential_drive">http://wiki.ros.org/differential_drive</a></p>
<p>After the node has been implemented, we need to build the workspace with <a href="https://catkin-tools.readthedocs.io/en/latest/verbs/catkin_build.html"><code>catkin build</code></a>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="gp">fjp@ubuntu:~/git/2wd-robot/ros$ </span>catkin build
<span class="go">----------------------------------------------------------------</span>
<span class="go">Profile:                     default</span>
<span class="go">Extending:          [cached] /opt/ros/melodic</span>
<span class="go">Workspace:                   /home/fjp/git/2wd-robot/ros</span>
<span class="go">----------------------------------------------------------------</span>
<span class="go">Build Space:        [exists] /home/fjp/git/2wd-robot/ros/build</span>
<span class="go">Devel Space:        [exists] /home/fjp/git/2wd-robot/ros/devel</span>
<span class="go">Install Space:      [unused] /home/fjp/git/2wd-robot/ros/install</span>
<span class="go">Log Space:          [exists] /home/fjp/git/2wd-robot/ros/logs</span>
<span class="go">Source Space:       [exists] /home/fjp/git/2wd-robot/ros/src</span>
<span class="go">DESTDIR:            [unused] None</span>
<span class="go">----------------------------------------------------------------</span>
<span class="go">Devel Space Layout:          linked</span>
<span class="go">Install Space Layout:        None</span>
<span class="go">----------------------------------------------------------------</span>
<span class="go">Additional CMake Args:       None</span>
<span class="go">Additional Make Args:        None</span>
<span class="go">Additional catkin Make Args: None</span>
<span class="go">Internal Make Job Server:    True</span>
<span class="go">Cache Job Environments:      False</span>
<span class="go">----------------------------------------------------------------</span>
<span class="go">Whitelisted Packages:        None</span>
<span class="go">Blacklisted Packages:        None</span>
<span class="go">----------------------------------------------------------------</span>
<span class="go">Workspace configuration appears valid.</span>
<span class="go">----------------------------------------------------------------</span>
<span class="go">[build] Found '2' packages in 0.0 seconds.                                                                          </span>
<span class="go">[build] Updating package table.                                                                                     </span>
<span class="go">Starting  &gt;&gt;&gt; grove_motor_driver                                                                                    </span>
<span class="go">Starting  &gt;&gt;&gt; grove_ultrasonic_ranger                                                                                                                                                                              </span>
<span class="go">Finished  &lt;&lt;&lt; grove_motor_driver                     [ 1.0 seconds ]                                                </span>
<span class="go">Finished  &lt;&lt;&lt; grove_ultrasonic_ranger                [ 1.0 seconds ]                                                                                             </span>
<span class="go">[build] Summary: All 2 packages succeeded!                                                                          </span>
<span class="go">[build]   Ignored:   None.                                                                                          </span>
<span class="go">[build]   Warnings:  None.                                                                                          </span>
<span class="go">[build]   Abandoned: None.                                                                                          </span>
<span class="go">[build]   Failed:    None.                                                                                          </span>
<span class="go">[build] Runtime: 2.0 seconds total. </span>
</code></pre></div></td></tr></table></div>
<p>As the final note of the build output suggests, we have to <code>source</code> the <code>setup.bash</code> files in the <code>devel</code> space.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="gp">fjp@ubuntu:~/git/2wd-robot/ros$ </span><span class="nb">source</span> devel/setup.bash
</code></pre></div></td></tr></table></div>
<p>To make the <code>ranger</code> node executable we have to modify the <code>ranger.py</code> file:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="gp">fjp@ubuntu:~/git/2wd-robot/ros/src/grove_ultrasonic_ranger/src$ </span>sudo chmod a+x ranger.py
</code></pre></div></td></tr></table></div>
</article>
</div>
</div>
<a class="md-top md-icon" data-md-component="top" hidden="" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
            Back to top
          </a>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Messages" class="md-footer__link md-footer__link--prev" href="../diffbot_msgs/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Messages
            </div>
</div>
</a>
<a aria-label="Next: Motor and Encoder" class="md-footer__link md-footer__link--next" href="../DG01D-E-motor-with-encoder/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Motor and Encoder
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright  2021 - 2021 Franz Pucher | <a href="https://www.ros-mobile-robots.com/privacy-policy/">Privacy Policy</a> | <a href="https://www.ros-mobile-robots.com/legal-notice/">Legal Notice</a>
</div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.top", "navigation.indexes"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
<script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
<script src="https://gumroad.com/js/gumroad.js"></script>
<script>
        $(document).ready(function(){
            // Target your .container, .wrapper, .post, etc.
            $(".md-main").fitVids();
        });
    </script>
<!-- cookie consent -->
<script data-cfasync="false" src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js"></script>
<script>
    window.cookieconsent.initialise({
    "palette": {
        "popup": {
        "background": "#edeff5",
        "text": "#838391"
        },
        "button": {
        "background": "#4b81e8"
        }
    },
    "theme": "classic"
    });
    </script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>