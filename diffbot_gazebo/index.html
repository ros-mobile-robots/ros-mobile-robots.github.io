
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://ros-mobile-robots.com/diffbot_gazebo/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.4">
    
    
      
        <title>Simulation - DiffBot Differential Drive Mobile Robot</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.db9e7362.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
    <script src="../js/jquery-3.5.1.min.js"></script>
    <script src="../js/jquery.fitvids.js"></script>
    <!-- Arithmatex -->
        <!-- MathJax
        <script src="../js/mathjax.js"></script>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        -->
        <!-- KaTeX -->
        <script src="../js/katex.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.js"
            integrity="sha256-F/Xda58SPdcUCr+xhSGz9MA2zQBPb0ASEYKohl8UCHc=" crossorigin="anonymous">
        </script>
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
    <!-- Pseudocode -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.css">
    <script src="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.js"></script>
    <script>
        pseudocode.renderElement(document.getElementById("markov-localization"));
    </script>
    <!-- UML diagrams using Mermaid -->
    <script src="https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true, securityLevel: "loose" });
    </script>
    <!-- Adsense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2214309606626131"
     crossorigin="anonymous"></script>
    <!-- Cookie consent -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />    

    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      

  


  

  


  <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5Z9V7GPRX3"),document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof location$&&location$.subscribe(function(t){gtag("config","G-5Z9V7GPRX3",{page_path:t.pathname})})})</script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-5Z9V7GPRX3"></script>


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#simulate-diffbot-in-gazebo" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="DiffBot Differential Drive Mobile Robot" class="md-header__button md-logo" aria-label="DiffBot Differential Drive Mobile Robot" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DiffBot Differential Drive Mobile Robot
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Simulation
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/ros-mobile-robots/diffbot/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../components/" class="md-tabs__link">
      Components
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../theory/" class="md-tabs__link">
        Robotics Theory
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../theory/motion-and-odometry/" class="md-tabs__link">
        Hardware and Theory
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../rpi-setup/" class="md-tabs__link">
        Processing Units
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../packages/" class="md-tabs__link md-tabs__link--active">
        Packages
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="DiffBot Differential Drive Mobile Robot" class="md-nav__button md-logo" aria-label="DiffBot Differential Drive Mobile Robot" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    DiffBot Differential Drive Mobile Robot
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ros-mobile-robots/diffbot/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../components/" class="md-nav__link">
        Components
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Robotics Theory
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Robotics Theory" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Robotics Theory
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/" class="md-nav__link">
        Theory behind Robotics
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          Preliminaries
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Preliminaries" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Preliminaries
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/preliminaries/linear-algebra/" class="md-nav__link">
        Linear Algebra
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/preliminaries/probability/" class="md-nav__link">
        Probability
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/preliminaries/programming/" class="md-nav__link">
        Programming
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_3">
          Modeling and Control
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Modeling and Control" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Modeling and Control
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/modeling-control/control-systems-introduction/" class="md-nav__link">
        Introduction to Control Systems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/modeling-control/robot-representations/" class="md-nav__link">
        Representations and models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/modeling-control/modeling-differential-drive-robot/" class="md-nav__link">
        Modeling a Differential Drive Robot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/modeling-control/odometry/" class="md-nav__link">
        Odometry
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_4">
          Robot Vision
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Robot Vision" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Robot Vision
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/robot-vision/pinhole-camera-model/" class="md-nav__link">
        Pinhole Camera Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/robot-vision/camera-calibration/" class="md-nav__link">
        Camera Calibration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/robot-vision/image-processing/" class="md-nav__link">
        Image Processing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/robot-vision/features-and-segmentation/" class="md-nav__link">
        Features and Segmentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/robot-vision/tracking-image-features/" class="md-nav__link">
        Tracking Image Features
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/robot-vision/combining-camera-and-lidar/" class="md-nav__link">
        Combining Camera and Lidar
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/object-detection/overview.md" class="md-nav__link">
        Object Detection
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6" type="checkbox" id="__nav_3_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_6">
          State Estimation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="State Estimation" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          State Estimation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/state-estimation/recursive-state-estimation/" class="md-nav__link">
        Recursive State Estimation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/state-estimation/gaussian-filters.md" class="md-nav__link">
        Gaussian Filters (Kalman Filter)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/state-estimation/nonparametric-filters/" class="md-nav__link">
        Nonparametric Filters (Particle Filter)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_7" type="checkbox" id="__nav_3_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_7">
          Localization
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Localization" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_7">
          <span class="md-nav__icon md-icon"></span>
          Localization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/localization/markov-and-gaussian-localization/" class="md-nav__link">
        Markov and Gaussian Localization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/localization/grid-and-monte-carlo-localization.md" class="md-nav__link">
        Grid and Monte Carlo Localization
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_8" type="checkbox" id="__nav_3_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_8">
          Mapping
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Mapping" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_8">
          <span class="md-nav__icon md-icon"></span>
          Mapping
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/mapping/occupancy-grid-mapping.md" class="md-nav__link">
        Occupancy Grid Mapping
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_9" type="checkbox" id="__nav_3_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_9">
          Simultaneous Localization and Mapping (SLAM)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Simultaneous Localization and Mapping (SLAM)" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_9">
          <span class="md-nav__icon md-icon"></span>
          Simultaneous Localization and Mapping (SLAM)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/slam/slam-overview/" class="md-nav__link">
        SLAM Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/slam/ekf-slam.md" class="md-nav__link">
        EKF SLAM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/slam/graphslam.md" class="md-nav__link">
        GraphSLAM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/slam/fastslam.md" class="md-nav__link">
        FastSLAM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/slam/gmapping.md" class="md-nav__link">
        GMapping
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/planning1/overview.md" class="md-nav__link">
        Planning I
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/planning2/overview.md" class="md-nav__link">
        Planning II
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/reinforcement-learning/overview.md" class="md-nav__link">
        Learning by Reinforcement
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/imitation-learning/overview.md" class="md-nav__link">
        Learning by Imitation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Hardware and Theory
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Hardware and Theory" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Hardware and Theory
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../theory/motion-and-odometry/" class="md-nav__link">
        Motion and Odometry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../power-supply/" class="md-nav__link">
        Power Supply
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../laser-range-scanner/" class="md-nav__link">
        Laser Range Scanner
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Processing Units
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Processing Units" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Processing Units
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpi-setup/" class="md-nav__link">
        Raspberry Pi Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jetson-nano-setup/" class="md-nav__link">
        Jetson Nano Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../git-setup/" class="md-nav__link">
        Git Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ros-setup/" class="md-nav__link">
        ROS Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../teensy-mcu/" class="md-nav__link">
        Teensy MCU
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hardware-interfaces/" class="md-nav__link">
        Hardware Interfaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ros-network-setup/" class="md-nav__link">
        ROS Network Setup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Packages
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Packages" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Packages
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../packages/" class="md-nav__link">
        Packages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../diffbot_robot/" class="md-nav__link">
        Robot Package
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_3" type="checkbox" id="__nav_6_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_3">
          Robot Description
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Robot Description" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          Robot Description
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../robot-description/" class="md-nav__link">
        Robot Description
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../packages/remo_description/" class="md-nav__link">
        Remo Description
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Simulation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Simulation
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#simulate-diffbot-in-gazebo" class="md-nav__link">
    Simulate DiffBot in Gazebo
  </a>
  
    <nav class="md-nav" aria-label="Simulate DiffBot in Gazebo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-ros-launch-to-spawn-urdf-robots" class="md-nav__link">
    Using ROS launch to Spawn URDF Robots
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moving-the-robot" class="md-nav__link">
    Moving the Robot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-sensors" class="md-nav__link">
    Adding Sensors
  </a>
  
    <nav class="md-nav" aria-label="Adding Sensors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#camera" class="md-nav__link">
    Camera
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#laser-lidar" class="md-nav__link">
    Laser (Lidar)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ultrasonic-ranger" class="md-nav__link">
    Ultrasonic Ranger
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inertial-measurement-unit-imu" class="md-nav__link">
    Inertial Measurement Unit (IMU)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../diffbot_control/" class="md-nav__link">
        Control
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../diffbot_base/" class="md-nav__link">
        Base Hardware Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../diffbot_msgs/" class="md-nav__link">
        Messages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../grove_motor_driver/" class="md-nav__link">
        Motor Driver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../DG01D-E-motor-with-encoder/" class="md-nav__link">
        Motor and Encoder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../diffbot_navigation/" class="md-nav__link">
        Navigation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../diffbot_slam/" class="md-nav__link">
        SLAM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../diffbot_mbf/" class="md-nav__link">
        Move Base Flex
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../diffbot_bringup/" class="md-nav__link">
        Hardware Bringup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../packages/raspicam_node/" class="md-nav__link">
        Rasperry Pi Camera
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#simulate-diffbot-in-gazebo" class="md-nav__link">
    Simulate DiffBot in Gazebo
  </a>
  
    <nav class="md-nav" aria-label="Simulate DiffBot in Gazebo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-ros-launch-to-spawn-urdf-robots" class="md-nav__link">
    Using ROS launch to Spawn URDF Robots
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moving-the-robot" class="md-nav__link">
    Moving the Robot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-sensors" class="md-nav__link">
    Adding Sensors
  </a>
  
    <nav class="md-nav" aria-label="Adding Sensors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#camera" class="md-nav__link">
    Camera
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#laser-lidar" class="md-nav__link">
    Laser (Lidar)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ultrasonic-ranger" class="md-nav__link">
    Ultrasonic Ranger
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inertial-measurement-unit-imu" class="md-nav__link">
    Inertial Measurement Unit (IMU)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              



                
                  <a href="https://github.com/ros-mobile-robots/ros-mobile-robots.github.io/tree/main/docs/diffbot_gazebo.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>Simulation</h1>
                
                <h2 id="simulate-diffbot-in-gazebo">Simulate DiffBot in Gazebo</h2>
<p>As described in the <a href="http://gazebosim.org/tutorials?tut=ros_roslaunch#CreatingyourownGazeboROSPackage">Creating your own Gazebo ROS Package</a>, it is common in ROS to create a package that contains all the world files and launch files used with Gazebo. These files are located in a ROS package named <code>/MYROBOT_gazebo</code>. For DiffBot the package is named <code>diffbot_gazebo</code>. Another example that follows best pratices is <code>rrbot</code> which can be found in the <a href="https://github.com/ros-simulation/gazebo_ros_demos">gazebo_ros_demos</a> repository.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="gp">fjp@ubuntu:~/git/diffbot/ros/src$ </span>catkin create pkg diffbot_gazebo
<span class="go">Creating package &quot;diffbot_gazebo&quot; in &quot;/home/fjp/git/diffbot/ros/src&quot;...</span>
<span class="go">Created file diffbot_gazebo/package.xml</span>
<span class="go">Created file diffbot_gazebo/CMakeLists.txt</span>
<span class="go">Successfully created package files in /home/fjp/git/diffbot/ros/src/diffbot_gazebo.</span>
</code></pre></div>
</td></tr></table>
<p>The <code>diffbot_gazebo</code> package contains a launch file to lauch a world in Gazebo and spawn the robot model, 
which is defined in the previously created <code>diffbot_description</code> package. 
For the launch files the convention is to have a folder named <code>launch</code> and for Gazebo world files a folder named <code>world</code> inside a package.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="gp">fjp@ubuntu:~/git/diffbot/ros/src/diffbot_gazebo$ </span>mkdir launch world
</code></pre></div>
</td></tr></table>
<p>Inside the <code>launch</code> folder is the <code>diffbot.launch</code>.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nt">&lt;launch&gt;</span>
    <span class="c">&lt;!-- these are the arguments you can pass this launch file, for example paused:=true --&gt;</span>
    <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;paused&quot;</span> <span class="na">default=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;use_sim_time&quot;</span> <span class="na">default=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;gui&quot;</span> <span class="na">default=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;headless&quot;</span> <span class="na">default=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;debug&quot;</span> <span class="na">default=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>

    <span class="c">&lt;!-- We resume the logic in empty_world.launch, changing only the name of the world to be launched --&gt;</span>
    <span class="nt">&lt;include</span> <span class="na">file=</span><span class="s">&quot;$(find gazebo_ros)/launch/empty_world.launch&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;world_name&quot;</span> <span class="na">value=</span><span class="s">&quot;$(find diffbot_gazebo)/worlds/diffbot.world&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;debug&quot;</span> <span class="na">value=</span><span class="s">&quot;$(arg debug)&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;gui&quot;</span> <span class="na">value=</span><span class="s">&quot;$(arg gui)&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;paused&quot;</span> <span class="na">value=</span><span class="s">&quot;$(arg paused)&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;use_sim_time&quot;</span> <span class="na">value=</span><span class="s">&quot;$(arg use_sim_time)&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;headless&quot;</span> <span class="na">value=</span><span class="s">&quot;$(arg headless)&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/include&gt;</span>
<span class="nt">&lt;/launch&gt;</span>
</code></pre></div>
</td></tr></table>
<p>In the <code>world</code> folder of the <code>diffbot_gazebo</code> package is the <code>diffbot.world</code> file:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span class="nt">&lt;sdf</span> <span class="na">version=</span><span class="s">&quot;1.4&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;world</span> <span class="na">name=</span><span class="s">&quot;default&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;include&gt;</span>
      <span class="nt">&lt;uri&gt;</span>model://ground_plane<span class="nt">&lt;/uri&gt;</span>
    <span class="nt">&lt;/include&gt;</span>
    <span class="nt">&lt;include&gt;</span>
      <span class="nt">&lt;uri&gt;</span>model://sun<span class="nt">&lt;/uri&gt;</span>
    <span class="nt">&lt;/include&gt;</span>
    <span class="nt">&lt;include&gt;</span>
      <span class="nt">&lt;uri&gt;</span>model://gas_station<span class="nt">&lt;/uri&gt;</span>
      <span class="nt">&lt;name&gt;</span>gas_station<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;pose&gt;</span>-2.0 7.0 0 0 0 0<span class="nt">&lt;/pose&gt;</span>
    <span class="nt">&lt;/include&gt;</span>
  <span class="nt">&lt;/world&gt;</span>
<span class="nt">&lt;/sdf&gt;</span>
</code></pre></div>
</td></tr></table>
<p>With these files build the catkin workspace and source it to make the new <code>diffbot_gazebo</code> package visible to <code>roslaunch</code>:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="go">catkin build</span>
<span class="go">source devel/setup.zsh</span>
</code></pre></div>
</td></tr></table>
<p>Then its possible to launch the <code>diffbot.launch</code> with:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="go">roslaunch diffbot_gazebo diffbot.launch</span>
</code></pre></div>
</td></tr></table>
<p>This will lead to the following output:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="go">roslaunch diffbot_gazebo diffbot.launch </span>
<span class="go">... logging to /home/fjp/.ros/log/6be90ef2-fdd8-11ea-9cb3-317fd602d5f2/roslaunch-tensorbook-393333.log</span>
<span class="go">Checking log directory for disk usage. This may take a while.</span>
<span class="go">Press Ctrl-C to interrupt</span>
<span class="go">Done checking log file disk usage. Usage is &lt;1GB.</span>

<span class="go">started roslaunch server http://tensorbook:32837/</span>

<span class="go">SUMMARY</span>
<span class="go">========</span>

<span class="go">PARAMETERS</span>
<span class="go"> * /gazebo/enable_ros_network: True</span>
<span class="go"> * /rosdistro: noetic</span>
<span class="go"> * /rosversion: 1.15.8</span>
<span class="go"> * /use_sim_time: True</span>

<span class="go">NODES</span>
<span class="go">  /</span>
<span class="go">    gazebo (gazebo_ros/gzserver)</span>
<span class="go">    gazebo_gui (gazebo_ros/gzclient)</span>

<span class="go">ROS_MASTER_URI=http://localhost:11311</span>

<span class="go">process[gazebo-1]: started with pid [393352]</span>
<span class="go">process[gazebo_gui-2]: started with pid [393357]</span>
<span class="go">[ INFO] [1600950165.494721382]: Finished loading Gazebo ROS API Plugin.</span>
<span class="go">[ INFO] [1600950165.495515766]: waitForService: Service [/gazebo/set_physics_properties] has not been advertised, waiting...</span>
<span class="go">[ INFO] [1600950165.649461740]: Finished loading Gazebo ROS API Plugin.</span>
<span class="go">[ INFO] [1600950165.650277038]: waitForService: Service [/gazebo_gui/set_physics_properties] has not been advertised, waiting...</span>
<span class="go">[ INFO] [1600950166.640929113]: waitForService: Service [/gazebo/set_physics_properties] is now available.</span>
<span class="go">[ INFO] [1600950166.659917502, 0.007000000]: Physics dynamic reconfigure ready.</span>
</code></pre></div>
</td></tr></table>
<p>Also, the Gazebo simulator will open a new window with the objects defined in <code>diffbot.world</code> except for the Gas station because it is a model 
that has to be downloaded first, which is happening in the background. TODO: gas station is not showing this way.</p>
<figure>
    <a href="/resources/gazebo/empty-world.png"><img src="/resources/gazebo/empty-world.png"></a>
    <figcaption>Empty world of DiffBot.</figcaption>
</figure>

<p>To get the Gas station or other available models it is possible to clone the <a href="https://github.com/osrf/gazebo_models">gazebo models repository</a> into your <code>/home/your_username/.gazebo</code> folder, e.g.:</p>
<p><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="go">/home/fjp/.gazeb$ git clone osrf/gazebo_models</span>
</code></pre></div>
</td></tr></table>
Then add this path inside Gazebo to insert these models into your world file.</p>
<h3 id="using-ros-launch-to-spawn-urdf-robots">Using ROS launch to Spawn URDF Robots</h3>
<p>According to the <a href="http://gazebosim.org/tutorials?tut=ros_roslaunch#UsingroslaunchtoSpawnURDFRobots">Gazebo roslaunch tutorial</a> the recommended way
 to spawn a robot into Gazebo is to use a launch file. Therefore, edit the <code>diffbot.launch</code> inside the <code>diffbot_gazebo</code> package by adding the following inside the <code>&lt;launch&gt; &lt;/launch</code> tag:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="go">   &lt;!-- Load the URDF into the ROS Parameter Server --&gt;</span>
<span class="go">   &lt;param name=&quot;robot_description&quot;</span>
<span class="go">       command=&quot;$(find xacro)/xacro --inorder &#39;$(find diffbot_description)/urdf/diffbot.xacro&#39;&quot; /&gt;</span>

<span class="go">   &lt;!-- Run a python script to the send a service call to gazebo_ros to spawn a URDF robot --&gt;</span>
<span class="go">   &lt;node name=&quot;urdf_spawner&quot; pkg=&quot;gazebo_ros&quot; type=&quot;spawn_model&quot; respawn=&quot;false&quot; output=&quot;screen&quot;</span>
<span class="go">       args=&quot;-urdf -model diffbot -param robot_description&quot;/&gt;</span>
</code></pre></div>
</td></tr></table>
<p>See also the complete <a href="https://github.com/fjp/diffbot/blob/master/ros/src/diffbot_gazebo/launch/diffbot.launch"><code>diffbot.launch</code></a> file.</p>
<p>This will open Gazebo simulator and show the DiffBot model:</p>
<p><figure>
    <a href="/resources/gazebo/diffbot.png"><img src="/resources/gazebo/diffbot.png"></a>
    <figcaption>Empty world including DiffBot.</figcaption>
</figure></p>
<h3 id="moving-the-robot">Moving the Robot</h3>
<p>Note that the robot cannot be moved without having either a Gazebo plugin loaded or making use of <a href="http://wiki.ros.org/ros_control">ROS Control</a>
and its Gazebo plugin <a href="http://wiki.ros.org/gazebo_ros_control"><code>gazebo_ros_control</code></a>, see also the <a href="http://gazebosim.org/tutorials/?tut=ros_control#Addthegazebo_ros_controlplugin">Gazebo ROS Control Tutorial</a>. Using the ROS Control and its Gazebo plugin is done in case of DiffBot. 
An alternative would be to use the existing <a href="http://gazebosim.org/tutorials?tut=ros_gzplugins#DifferentialDrive"><code>differential_drive_controller</code></a> Gazebo plugin without having to rely on ROS Control. 
The next section explains the <code>diffbot_control</code> package in more detail and how to setup the 
<a href="http://wiki.ros.org/diff_drive_controller?distro=noetic"><code>diff_drive_controller</code></a>
from the <a href="http://wiki.ros.org/ros_controllers"><code>ros_controllers</code></a> package.</p>
<h3 id="adding-sensors">Adding Sensors</h3>
<p>To add sensors to a robot model make use of link and joint tags to define the desired location and shape, possibly using meshes.
For the simulation of these sensor there exist common Gazebo plugins that can be used. See, the [Tutorial: Using Gazebo plugins with ROS]
for existing plugins and more details how to use them. For a full list of plugins see also <a href="https://github.com/ros-simulation/gazebo_ros_pkgs/tree/kinetic-devel/gazebo_plugins/src"><code>gazebo_ros_pkgs</code></a> which is a package or interface
for using ROS with the Gazebo simulator.</p>
<h4 id="camera">Camera</h4>
<p>This section follows Gazebo tutorial <a href="http://gazebosim.org/tutorials?tut=ros_gzplugins#Camera">Adding a Camera</a>.</p>
<h4 id="laser-lidar">Laser (Lidar)</h4>
<p>This section follows Gazebo tutorial <a href="http://gazebosim.org/tutorials?tut=ros_gzplugins#GPULaser">Adding a Laser GPU</a>.</p>
<h4 id="ultrasonic-ranger">Ultrasonic Ranger</h4>
<p>See the source of the <a href="https://github.com/ros-simulation/gazebo_ros_pkgs/blob/kinetic-devel/gazebo_plugins/src/gazebo_ros_range.cpp"><code>gazebo_ros_range</code></a> plugin.</p>
<h4 id="inertial-measurement-unit-imu">Inertial Measurement Unit (IMU)</h4>
<p>This section follows Gazebo tutorial [Adding an IMU](http://gazebosim.org/tutorials?tut=ros_gzplugins#IMU(GazeboRosImu). Note use GazeboRosImuSensor?</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>A quick way to verify if the conversion from <a href="http://wiki.ros.org/xacro">xacro</a> to <a href="http://wiki.ros.org/urdf">urdf</a> to <a href="http://sdformat.org/">sdf</a> is working is the following (<a href="http://gazebosim.org/tutorials/?tut=ros_urdf#VerifyingtheGazeboModelWorks">source: Tutorial URDF in Gazebo</a>):
First convert the xacro model to a urdf model with the <code>xacro</code> command:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="go">xacro src/diffbot_description/urdf/diffbot.xacro -o diffbot.urdf</span>
</code></pre></div>
</td></tr></table>
<p>This will output the urdf into a file named <code>diffbot.urdf</code> in the current working directory.</p>
<p>Then use the <code>gz</code> command to create a sdf:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code># gazebo3 and above
gz sdf -p MODEL.urdf
</code></pre></div>
</td></tr></table>
<details>
<p><summary>DiffBot sdf.</summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nt">&lt;sdf</span> <span class="na">version=</span><span class="s">&#39;1.7&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">&#39;diffbot&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">&#39;base_footprint&#39;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;inertial&gt;</span>
        <span class="nt">&lt;pose&gt;</span>-0.012273 0 0.040818 0 -0 0<span class="nt">&lt;/pose&gt;</span>
        <span class="nt">&lt;mass&gt;</span>5.5<span class="nt">&lt;/mass&gt;</span>
        <span class="nt">&lt;inertia&gt;</span>
          <span class="nt">&lt;ixx&gt;</span>0.0387035<span class="nt">&lt;/ixx&gt;</span>
          <span class="nt">&lt;ixy&gt;</span>0<span class="nt">&lt;/ixy&gt;</span>
          <span class="nt">&lt;ixz&gt;</span>0.000552273<span class="nt">&lt;/ixz&gt;</span>
          <span class="nt">&lt;iyy&gt;</span>0.0188626<span class="nt">&lt;/iyy&gt;</span>
          <span class="nt">&lt;iyz&gt;</span>0<span class="nt">&lt;/iyz&gt;</span>
          <span class="nt">&lt;izz&gt;</span>0.0561591<span class="nt">&lt;/izz&gt;</span>
        <span class="nt">&lt;/inertia&gt;</span>
      <span class="nt">&lt;/inertial&gt;</span>
      <span class="nt">&lt;collision</span> <span class="na">name=</span><span class="s">&#39;base_footprint_collision&#39;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;pose&gt;</span>0 0 0 0 -0 0<span class="nt">&lt;/pose&gt;</span>
        <span class="nt">&lt;geometry&gt;</span>
          <span class="nt">&lt;box&gt;</span>
            <span class="nt">&lt;size&gt;</span>0.001 0.001 0.001<span class="nt">&lt;/size&gt;</span>
          <span class="nt">&lt;/box&gt;</span>
        <span class="nt">&lt;/geometry&gt;</span>
        <span class="nt">&lt;surface&gt;</span>
          <span class="nt">&lt;contact&gt;</span>
            <span class="nt">&lt;ode/&gt;</span>
          <span class="nt">&lt;/contact&gt;</span>
          <span class="nt">&lt;friction&gt;</span>
            <span class="nt">&lt;ode/&gt;</span>
          <span class="nt">&lt;/friction&gt;</span>
        <span class="nt">&lt;/surface&gt;</span>
      <span class="nt">&lt;/collision&gt;</span>
      <span class="nt">&lt;collision</span> <span class="na">name=</span><span class="s">&#39;base_footprint_fixed_joint_lump__base_link_collision_1&#39;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;pose&gt;</span>0 0 0.04 0 -0 0<span class="nt">&lt;/pose&gt;</span>
        <span class="nt">&lt;geometry&gt;</span>
          <span class="nt">&lt;box&gt;</span>
            <span class="nt">&lt;size&gt;</span>0.3 0.15 0.02<span class="nt">&lt;/size&gt;</span>
          <span class="nt">&lt;/box&gt;</span>
        <span class="nt">&lt;/geometry&gt;</span>
        <span class="nt">&lt;surface&gt;</span>
          <span class="nt">&lt;contact&gt;</span>
            <span class="nt">&lt;ode/&gt;</span>
          <span class="nt">&lt;/contact&gt;</span>
          <span class="nt">&lt;friction&gt;</span>
            <span class="nt">&lt;ode/&gt;</span>
          <span class="nt">&lt;/friction&gt;</span>
        <span class="nt">&lt;/surface&gt;</span>
      <span class="nt">&lt;/collision&gt;</span>
      <span class="nt">&lt;collision</span> <span class="na">name=</span><span class="s">&#39;base_footprint_fixed_joint_lump__caster_link_collision_2&#39;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;pose&gt;</span>-0.135 0 0.029 0 -0 0<span class="nt">&lt;/pose&gt;</span>
        <span class="nt">&lt;geometry&gt;</span>
          <span class="nt">&lt;sphere&gt;</span>
            <span class="nt">&lt;radius&gt;</span>0.025<span class="nt">&lt;/radius&gt;</span>
          <span class="nt">&lt;/sphere&gt;</span>
        <span class="nt">&lt;/geometry&gt;</span>
        <span class="nt">&lt;surface&gt;</span>
          <span class="nt">&lt;contact&gt;</span>
            <span class="nt">&lt;ode/&gt;</span>
          <span class="nt">&lt;/contact&gt;</span>
          <span class="nt">&lt;friction&gt;</span>
            <span class="nt">&lt;ode/&gt;</span>
          <span class="nt">&lt;/friction&gt;</span>
        <span class="nt">&lt;/surface&gt;</span>
      <span class="nt">&lt;/collision&gt;</span>
      <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">&#39;base_footprint_fixed_joint_lump__base_link_visual&#39;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;pose&gt;</span>0 0 0.04 0 -0 0<span class="nt">&lt;/pose&gt;</span>
        <span class="nt">&lt;geometry&gt;</span>
          <span class="nt">&lt;box&gt;</span>
            <span class="nt">&lt;size&gt;</span>0.3 0.15 0.02<span class="nt">&lt;/size&gt;</span>
          <span class="nt">&lt;/box&gt;</span>
        <span class="nt">&lt;/geometry&gt;</span>
        <span class="nt">&lt;material&gt;</span>
          <span class="nt">&lt;script&gt;</span>
            <span class="nt">&lt;name&gt;</span>Gazebo/White<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;uri&gt;</span>file://media/materials/scripts/gazebo.material<span class="nt">&lt;/uri&gt;</span>
          <span class="nt">&lt;/script&gt;</span>
        <span class="nt">&lt;/material&gt;</span>
      <span class="nt">&lt;/visual&gt;</span>
      <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">&#39;base_footprint_fixed_joint_lump__caster_link_visual_1&#39;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;pose&gt;</span>-0.115 0 0.029 0 -0 0<span class="nt">&lt;/pose&gt;</span>
        <span class="nt">&lt;geometry&gt;</span>
          <span class="nt">&lt;sphere&gt;</span>
            <span class="nt">&lt;radius&gt;</span>0.025<span class="nt">&lt;/radius&gt;</span>
          <span class="nt">&lt;/sphere&gt;</span>
        <span class="nt">&lt;/geometry&gt;</span>
      <span class="nt">&lt;/visual&gt;</span>
      <span class="nt">&lt;velocity_decay/&gt;</span>
      <span class="nt">&lt;velocity_decay/&gt;</span>
      <span class="nt">&lt;gravity&gt;</span>1<span class="nt">&lt;/gravity&gt;</span>
      <span class="nt">&lt;velocity_decay/&gt;</span>
    <span class="nt">&lt;/link&gt;</span>
    <span class="nt">&lt;joint</span> <span class="na">name=</span><span class="s">&#39;front_left_wheel_joint&#39;</span> <span class="na">type=</span><span class="s">&#39;revolute&#39;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;pose</span> <span class="na">relative_to=</span><span class="s">&#39;base_footprint&#39;</span><span class="nt">&gt;</span>0.105 -0.085 0.04 0 -0 0<span class="nt">&lt;/pose&gt;</span>
      <span class="nt">&lt;parent&gt;</span>base_footprint<span class="nt">&lt;/parent&gt;</span>
      <span class="nt">&lt;child&gt;</span>front_left_wheel<span class="nt">&lt;/child&gt;</span>
      <span class="nt">&lt;axis&gt;</span>
        <span class="nt">&lt;xyz&gt;</span>0 1 0<span class="nt">&lt;/xyz&gt;</span>
        <span class="nt">&lt;limit&gt;</span>
          <span class="nt">&lt;lower&gt;</span>-1e+16<span class="nt">&lt;/lower&gt;</span>
          <span class="nt">&lt;upper&gt;</span>1e+16<span class="nt">&lt;/upper&gt;</span>
        <span class="nt">&lt;/limit&gt;</span>
        <span class="nt">&lt;dynamics&gt;</span>
          <span class="nt">&lt;spring_reference&gt;</span>0<span class="nt">&lt;/spring_reference&gt;</span>
          <span class="nt">&lt;spring_stiffness&gt;</span>0<span class="nt">&lt;/spring_stiffness&gt;</span>
        <span class="nt">&lt;/dynamics&gt;</span>
      <span class="nt">&lt;/axis&gt;</span>
    <span class="nt">&lt;/joint&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">&#39;front_left_wheel&#39;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;pose</span> <span class="na">relative_to=</span><span class="s">&#39;front_left_wheel_joint&#39;</span><span class="nt">&gt;</span>0 0 0 0 -0 0<span class="nt">&lt;/pose&gt;</span>
      <span class="nt">&lt;inertial&gt;</span>
        <span class="nt">&lt;pose&gt;</span>0 0 0 0 -0 0<span class="nt">&lt;/pose&gt;</span>
        <span class="nt">&lt;mass&gt;</span>2.5<span class="nt">&lt;/mass&gt;</span>
        <span class="nt">&lt;inertia&gt;</span>
          <span class="nt">&lt;ixx&gt;</span>0.00108333<span class="nt">&lt;/ixx&gt;</span>
          <span class="nt">&lt;ixy&gt;</span>0<span class="nt">&lt;/ixy&gt;</span>
          <span class="nt">&lt;ixz&gt;</span>0<span class="nt">&lt;/ixz&gt;</span>
          <span class="nt">&lt;iyy&gt;</span>0.00108333<span class="nt">&lt;/iyy&gt;</span>
          <span class="nt">&lt;iyz&gt;</span>0<span class="nt">&lt;/iyz&gt;</span>
          <span class="nt">&lt;izz&gt;</span>0.002<span class="nt">&lt;/izz&gt;</span>
        <span class="nt">&lt;/inertia&gt;</span>
      <span class="nt">&lt;/inertial&gt;</span>
      <span class="nt">&lt;collision</span> <span class="na">name=</span><span class="s">&#39;front_left_wheel_collision&#39;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;pose&gt;</span>0 0 0 1.5708 -0 0<span class="nt">&lt;/pose&gt;</span>
        <span class="nt">&lt;geometry&gt;</span>
          <span class="nt">&lt;cylinder&gt;</span>
            <span class="nt">&lt;length&gt;</span>0.02<span class="nt">&lt;/length&gt;</span>
            <span class="nt">&lt;radius&gt;</span>0.04<span class="nt">&lt;/radius&gt;</span>
          <span class="nt">&lt;/cylinder&gt;</span>
        <span class="nt">&lt;/geometry&gt;</span>
        <span class="nt">&lt;surface&gt;</span>
          <span class="nt">&lt;contact&gt;</span>
            <span class="nt">&lt;ode&gt;</span>
              <span class="nt">&lt;kp&gt;</span>1e+07<span class="nt">&lt;/kp&gt;</span>
              <span class="nt">&lt;kd&gt;</span>1<span class="nt">&lt;/kd&gt;</span>
            <span class="nt">&lt;/ode&gt;</span>
          <span class="nt">&lt;/contact&gt;</span>
          <span class="nt">&lt;friction&gt;</span>
            <span class="nt">&lt;ode&gt;</span>
              <span class="nt">&lt;mu&gt;</span>1<span class="nt">&lt;/mu&gt;</span>
              <span class="nt">&lt;mu2&gt;</span>1<span class="nt">&lt;/mu2&gt;</span>
              <span class="nt">&lt;fdir1&gt;</span>1 0 0<span class="nt">&lt;/fdir1&gt;</span>
            <span class="nt">&lt;/ode&gt;</span>
          <span class="nt">&lt;/friction&gt;</span>
        <span class="nt">&lt;/surface&gt;</span>
      <span class="nt">&lt;/collision&gt;</span>
      <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">&#39;front_left_wheel_visual&#39;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;pose&gt;</span>0 0 0 1.5708 -0 0<span class="nt">&lt;/pose&gt;</span>
        <span class="nt">&lt;geometry&gt;</span>
          <span class="nt">&lt;cylinder&gt;</span>
            <span class="nt">&lt;length&gt;</span>0.02<span class="nt">&lt;/length&gt;</span>
            <span class="nt">&lt;radius&gt;</span>0.04<span class="nt">&lt;/radius&gt;</span>
          <span class="nt">&lt;/cylinder&gt;</span>
        <span class="nt">&lt;/geometry&gt;</span>
        <span class="nt">&lt;material&gt;</span>
          <span class="nt">&lt;script&gt;</span>
            <span class="nt">&lt;name&gt;</span>Gazebo/Grey<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;uri&gt;</span>file://media/materials/scripts/gazebo.material<span class="nt">&lt;/uri&gt;</span>
          <span class="nt">&lt;/script&gt;</span>
        <span class="nt">&lt;/material&gt;</span>
      <span class="nt">&lt;/visual&gt;</span>
      <span class="nt">&lt;gravity&gt;</span>1<span class="nt">&lt;/gravity&gt;</span>
      <span class="nt">&lt;velocity_decay/&gt;</span>
    <span class="nt">&lt;/link&gt;</span>
    <span class="nt">&lt;joint</span> <span class="na">name=</span><span class="s">&#39;front_right_wheel_joint&#39;</span> <span class="na">type=</span><span class="s">&#39;revolute&#39;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;pose</span> <span class="na">relative_to=</span><span class="s">&#39;base_footprint&#39;</span><span class="nt">&gt;</span>0.105 0.085 0.04 0 -0 0<span class="nt">&lt;/pose&gt;</span>
      <span class="nt">&lt;parent&gt;</span>base_footprint<span class="nt">&lt;/parent&gt;</span>
      <span class="nt">&lt;child&gt;</span>front_right_wheel<span class="nt">&lt;/child&gt;</span>
      <span class="nt">&lt;axis&gt;</span>
        <span class="nt">&lt;xyz&gt;</span>0 1 0<span class="nt">&lt;/xyz&gt;</span>
        <span class="nt">&lt;limit&gt;</span>
          <span class="nt">&lt;lower&gt;</span>-1e+16<span class="nt">&lt;/lower&gt;</span>
          <span class="nt">&lt;upper&gt;</span>1e+16<span class="nt">&lt;/upper&gt;</span>
        <span class="nt">&lt;/limit&gt;</span>
        <span class="nt">&lt;dynamics&gt;</span>
          <span class="nt">&lt;spring_reference&gt;</span>0<span class="nt">&lt;/spring_reference&gt;</span>
          <span class="nt">&lt;spring_stiffness&gt;</span>0<span class="nt">&lt;/spring_stiffness&gt;</span>
        <span class="nt">&lt;/dynamics&gt;</span>
      <span class="nt">&lt;/axis&gt;</span>
    <span class="nt">&lt;/joint&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">&#39;front_right_wheel&#39;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;pose</span> <span class="na">relative_to=</span><span class="s">&#39;front_right_wheel_joint&#39;</span><span class="nt">&gt;</span>0 0 0 0 -0 0<span class="nt">&lt;/pose&gt;</span>
      <span class="nt">&lt;inertial&gt;</span>
        <span class="nt">&lt;pose&gt;</span>0 0 0 0 -0 0<span class="nt">&lt;/pose&gt;</span>
        <span class="nt">&lt;mass&gt;</span>2.5<span class="nt">&lt;/mass&gt;</span>
        <span class="nt">&lt;inertia&gt;</span>
          <span class="nt">&lt;ixx&gt;</span>0.00108333<span class="nt">&lt;/ixx&gt;</span>
          <span class="nt">&lt;ixy&gt;</span>0<span class="nt">&lt;/ixy&gt;</span>
          <span class="nt">&lt;ixz&gt;</span>0<span class="nt">&lt;/ixz&gt;</span>
          <span class="nt">&lt;iyy&gt;</span>0.00108333<span class="nt">&lt;/iyy&gt;</span>
          <span class="nt">&lt;iyz&gt;</span>0<span class="nt">&lt;/iyz&gt;</span>
          <span class="nt">&lt;izz&gt;</span>0.002<span class="nt">&lt;/izz&gt;</span>
        <span class="nt">&lt;/inertia&gt;</span>
      <span class="nt">&lt;/inertial&gt;</span>
      <span class="nt">&lt;collision</span> <span class="na">name=</span><span class="s">&#39;front_right_wheel_collision&#39;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;pose&gt;</span>0 0 0 1.5708 -0 0<span class="nt">&lt;/pose&gt;</span>
        <span class="nt">&lt;geometry&gt;</span>
          <span class="nt">&lt;cylinder&gt;</span>
            <span class="nt">&lt;length&gt;</span>0.02<span class="nt">&lt;/length&gt;</span>
            <span class="nt">&lt;radius&gt;</span>0.04<span class="nt">&lt;/radius&gt;</span>
          <span class="nt">&lt;/cylinder&gt;</span>
        <span class="nt">&lt;/geometry&gt;</span>
        <span class="nt">&lt;surface&gt;</span>
          <span class="nt">&lt;contact&gt;</span>
            <span class="nt">&lt;ode&gt;</span>
              <span class="nt">&lt;kp&gt;</span>1e+07<span class="nt">&lt;/kp&gt;</span>
              <span class="nt">&lt;kd&gt;</span>1<span class="nt">&lt;/kd&gt;</span>
            <span class="nt">&lt;/ode&gt;</span>
          <span class="nt">&lt;/contact&gt;</span>
          <span class="nt">&lt;friction&gt;</span>
            <span class="nt">&lt;ode&gt;</span>
              <span class="nt">&lt;mu&gt;</span>1<span class="nt">&lt;/mu&gt;</span>
              <span class="nt">&lt;mu2&gt;</span>1<span class="nt">&lt;/mu2&gt;</span>
              <span class="nt">&lt;fdir1&gt;</span>1 0 0<span class="nt">&lt;/fdir1&gt;</span>
            <span class="nt">&lt;/ode&gt;</span>
          <span class="nt">&lt;/friction&gt;</span>
        <span class="nt">&lt;/surface&gt;</span>
      <span class="nt">&lt;/collision&gt;</span>
      <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">&#39;front_right_wheel_visual&#39;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;pose&gt;</span>0 0 0 1.5708 -0 0<span class="nt">&lt;/pose&gt;</span>
        <span class="nt">&lt;geometry&gt;</span>
          <span class="nt">&lt;cylinder&gt;</span>
            <span class="nt">&lt;length&gt;</span>0.02<span class="nt">&lt;/length&gt;</span>
            <span class="nt">&lt;radius&gt;</span>0.04<span class="nt">&lt;/radius&gt;</span>
          <span class="nt">&lt;/cylinder&gt;</span>
        <span class="nt">&lt;/geometry&gt;</span>
        <span class="nt">&lt;material&gt;</span>
          <span class="nt">&lt;script&gt;</span>
            <span class="nt">&lt;name&gt;</span>Gazebo/Grey<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;uri&gt;</span>file://media/materials/scripts/gazebo.material<span class="nt">&lt;/uri&gt;</span>
          <span class="nt">&lt;/script&gt;</span>
        <span class="nt">&lt;/material&gt;</span>
      <span class="nt">&lt;/visual&gt;</span>
      <span class="nt">&lt;gravity&gt;</span>1<span class="nt">&lt;/gravity&gt;</span>
      <span class="nt">&lt;velocity_decay/&gt;</span>
    <span class="nt">&lt;/link&gt;</span>
    <span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">&#39;gazebo_ros_control&#39;</span> <span class="na">filename=</span><span class="s">&#39;libgazebo_ros_control.so&#39;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;robotNamespace&gt;</span>/diffbot<span class="nt">&lt;/robotNamespace&gt;</span>
      <span class="nt">&lt;robotSimType&gt;</span>gazebo_ros_control/DefaultRobotHWSim<span class="nt">&lt;/robotSimType&gt;</span>
    <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;static&gt;</span>0<span class="nt">&lt;/static&gt;</span>
    <span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">&#39;differential_drive_controller&#39;</span> <span class="na">filename=</span><span class="s">&#39;libgazebo_ros_diff_drive.so&#39;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;legacyMode&gt;</span>1<span class="nt">&lt;/legacyMode&gt;</span>
      <span class="nt">&lt;rosDebugLevel&gt;</span>Debug<span class="nt">&lt;/rosDebugLevel&gt;</span>
      <span class="nt">&lt;publishWheelTF&gt;</span>0<span class="nt">&lt;/publishWheelTF&gt;</span>
      <span class="nt">&lt;robotNamespace&gt;</span>/<span class="nt">&lt;/robotNamespace&gt;</span>
      <span class="nt">&lt;publishTf&gt;</span>1<span class="nt">&lt;/publishTf&gt;</span>
      <span class="nt">&lt;publishWheelJointState&gt;</span>0<span class="nt">&lt;/publishWheelJointState&gt;</span>
      <span class="nt">&lt;alwaysOn&gt;</span>1<span class="nt">&lt;/alwaysOn&gt;</span>
      <span class="nt">&lt;updateRate&gt;</span>100.0<span class="nt">&lt;/updateRate&gt;</span>
      <span class="nt">&lt;leftJoint&gt;</span>front_left_wheel_joint<span class="nt">&lt;/leftJoint&gt;</span>
      <span class="nt">&lt;rightJoint&gt;</span>front_right_wheel_joint<span class="nt">&lt;/rightJoint&gt;</span>
      <span class="nt">&lt;wheelSeparation&gt;</span>0.3<span class="nt">&lt;/wheelSeparation&gt;</span>
      <span class="nt">&lt;wheelDiameter&gt;</span>0.08<span class="nt">&lt;/wheelDiameter&gt;</span>
      <span class="nt">&lt;broadcastTF&gt;</span>1<span class="nt">&lt;/broadcastTF&gt;</span>
      <span class="nt">&lt;wheelTorque&gt;</span>30<span class="nt">&lt;/wheelTorque&gt;</span>
      <span class="nt">&lt;wheelAcceleration&gt;</span>1.8<span class="nt">&lt;/wheelAcceleration&gt;</span>
      <span class="nt">&lt;commandTopic&gt;</span>cmd_vel<span class="nt">&lt;/commandTopic&gt;</span>
      <span class="nt">&lt;odometryFrame&gt;</span>odom<span class="nt">&lt;/odometryFrame&gt;</span>
      <span class="nt">&lt;odometryTopic&gt;</span>odom<span class="nt">&lt;/odometryTopic&gt;</span>
      <span class="nt">&lt;robotBaseFrame&gt;</span>base_footprint<span class="nt">&lt;/robotBaseFrame&gt;</span>
    <span class="nt">&lt;/plugin&gt;</span>
  <span class="nt">&lt;/model&gt;</span>
<span class="nt">&lt;/sdf&gt;</span>
</code></pre></div>
</td></tr></table></p>
</details>
<p>In case the output looks like the following, there are most certainly missing <a href="http://wiki.ros.org/urdf/Tutorials/Adding%20Physical%20and%20Collision%20Properties%20to%20a%20URDF%20Model#Inertia"><code>&lt;inertial&gt;</code></a> tags in the <code>&lt;link&gt;</code> tag.
For the Gazebo simulator the <code>&lt;inertial&gt;</code> must be present, in order to simulate the dynamics of the robot. 
See also http://wiki.ros.org/urdf/XML/link and the <a href="http://gazebosim.org/tutorials/?tut=ros_urdf">Gazebo tutorials on URDF</a>.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nt">&lt;sdf</span> <span class="na">version=</span><span class="s">&#39;1.7&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">&#39;diffbot&#39;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/sdf&gt;</span>
</code></pre></div>
</td></tr></table>
                
              

              
                


  <h2 id="__comments">Comments</h2>
  <div id="disqus_thread"></div>
  <script>var script,disqus_config=function(){this.page.url="https://ros-mobile-robots.com/diffbot_gazebo/",this.page.identifier="diffbot_gazebo/"};"undefined"==typeof DISQUS?((script=document.createElement("script")).async=!0,script.src="https://ros-mobile-robots.disqus.com/embed.js",script.setAttribute("data-timestamp",Date.now()),document.body.appendChild(script)):DISQUS.reset({reload:!0,config:disqus_config})</script>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../packages/remo_description/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Remo Description" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Remo Description
            </div>
          </div>
        </a>
      
      
        
        <a href="../diffbot_control/" class="md-footer__link md-footer__link--next" aria-label="Next: Control" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Control
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2021 - 2021 Franz Pucher | <a href="https://www.ros-mobile-robots.com/privacy-policy/">Privacy Policy</a> | <a href="https://www.ros-mobile-robots.com/legal-notice/">Legal Notice</a>
          </div>
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.top"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.8397ff9e.min.js", "version": null}</script>
    
    
    
      <script src="../assets/javascripts/bundle.1e84347e.min.js"></script>
      
    
    <script src="https://gumroad.com/js/gumroad.js"></script>
    <script>
        $(document).ready(function(){
            // Target your .container, .wrapper, .post, etc.
            $(".md-main").fitVids();
        });
    </script>
    <!-- cookie consent -->
    <script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script>
    <script>
    window.cookieconsent.initialise({
    "palette": {
        "popup": {
        "background": "#edeff5",
        "text": "#838391"
        },
        "button": {
        "background": "#4b81e8"
        }
    },
    "theme": "classic"
    });
    </script>

  </body>
</html>